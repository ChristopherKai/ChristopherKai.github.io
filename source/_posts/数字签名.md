---
title: 消息摘要、数字签名与CA证书
tags:
  - python
  - development
  - security
date: 2017-11-24 16:08:39
---

## 消息摘要
  对一段文本进行hash，文本发生很小改变，hash也会改变。


## 数字签名
  基于非对称加密算法。
  权且将需要签名端称作服务端，先生成密钥对，将需要签名文本生成消息摘要，用**私钥**将摘要加密，加密后的摘要称作签体，
  将原文本、公钥、签体发送到客户端，客户端将签体用公钥解密得到消息摘要A，将原文本用相同消息摘要算法计算得到消息摘要B，消息摘要A和B相同则文本**完整**，**无篡改**，加密传输保证*无嗅探*，只有服务器拥有私钥保证了*不可抵赖性*。


##  CA证书
  上述加密算法保证了保密性，但是不可抵抗中间人攻击。
  中间人攻击原理：伪造服务器公钥，伪装成服务器回复客户端。
  所以有了CA证书。CA：certificate authority。根证书颁发机构可信性、所有客户端都安装有根证书是一切的前提。需要保证自身合法性的机构付费向根证书颁发机构购买证书，证书包含内容大致包括：
  1.申请机构的公钥X 2.申请机构的信息3.CA机构信息4.由CA机构的私钥加密申请机构公钥X生成的数字签名。
  在客户端请求连接后，服务器先发来CA证书，由于已经安装CA机构证书可以通过CA机构公钥解密公钥X得到数字签名，验证是否合法。如果合法，就可以使用公钥X和服务器通信了。

  如果中间人想要伪装，可以1，也可以伪造2，,也可以伪造3，但是由于没有CA机构的私钥，永远无法伪造**伪造的申请机构的公钥X**的数字签名！
