---
title: 编译原理简述
tags:
  - Note
  - Compiler
---

# 编译器的三个阶段：
    1.Parsing 对源代码解析成为源语言的AST
    2.Tranformation 将源语言AST转为目标语言AST
    3.Code Generation 从目标语言AST生成目标语言代码
    

总结：
**Source Code** 

----tokenizer---------> 

**tokens**

----parser------------>  

**source code AST**

-----transformer------> 

**taget language AST** 

---Code generator----->  

**Target Code**

## Parsing

分为两个阶段：

1.  Lexical Analysis
2.  Syntax Analysis

### Lexical Analysis

将源代码解析为token数组，如标签label，符号+-*/，数字等。

### Syntax Analysis

将这个token数组重新组合，形成一个能够表示其内在联系的数据结构，叫做AST(Abstract Syntax Tree)。


## Transforming

Lisp：`(add 2 (substract 4 2))`
C：`add(2, substract(4,2))`
从语言Lisp到类C语言。
Lisp一上来就是Call表达式

``` javascript
* ----------------------------------------------------------------------------
 *   {                                |   {
 *     type: 'Program',               |     type: 'Program',
 *     body: [{                       |     body: [{
 *       type: 'CallExpression',      |       type: 'ExpressionStatement',
 *       name: 'add',                 |       expression: {
 *       params: [{                   |         type: 'CallExpression',
 *         type: 'NumberLiteral',     |         callee: {
 *         value: '2'                 |           type: 'Identifier',
 *       }, {                         |           name: 'add'
 *         type: 'CallExpression',    |         },
 *         name: 'subtract',          |         arguments: [{
 *         params: [{                 |           type: 'NumberLiteral',
 *           type: 'NumberLiteral',   |           value: '2'
 *           value: '4'               |         }, {
 *         }, {                       |           type: 'CallExpression',
 *           type: 'NumberLiteral',   |           callee: {
 *           value: '2'               |             type: 'Identifier',
 *         }]                         |             name: 'subtract'
 *       }]                           |           },
 *     }]                             |           arguments: [{
 *   }                                |             type: 'NumberLiteral',
 *                                    |             value: '4'
 * ---------------------------------- |           }, {
 *                                    |             type: 'NumberLiteral',
 *                                    |             value: '2'
 *                                    |           }]
 *  (sorry the other one is longer.)  |         }
 *                                    |       }
 *                                    |     }]
 *                                    |   }
 * ----------------------------------------------------------------------------
```
### Code Generation

从目标语言AST转为目标语言。


参考自youtube视频[How to Build a Compiler by James Kyle][1]
参考2：[超小编译器][2]


  [1]: https://www.youtube.com/watch?v=Tar4WgAfMr4
  [2]: https://github.com/jamiebuilds/the-super-tiny-compiler/blob/master/the-super-tiny-compiler.js#L161